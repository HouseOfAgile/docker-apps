# generated by docker-apps
{{ 'FROM ' + docker_base['docker_from'] if docker_base['docker_from'] is defined else 'FROM scratch' }}
{% for docker_part in ['docker_init','docker_reqs','docker_core','docker_post'] %}
  {%- if docker_base[docker_part] is defined and docker_base[docker_part]|length %}
{{ docker_base[docker_part] }}
  {%- endif %}
  {%- if docker_stack[docker_part] is defined and docker_stack[docker_part]|length %}
{{ docker_stack[docker_part] }}
  {%- endif %}
  {%- for flavor in docker_flavors %}
{{ docker_flavors[flavor][docker_part] }}
  {%- endfor %}
{% endfor %}

{%- for expose_port in docker_stack['docker_expose'] %}
EXPOSE {{ expose_port }}
{% endfor %}
{% if docker_stack['docker_cmd'] is defined and docker_stack['docker_cmd']|length %}
{{ docker_stack['docker_cmd'] }}
{% elif docker_base['docker_cmd'] is defined and docker_base['docker_cmd']|length %}
{{ docker_base['docker_cmd'] }}
{% endif %}
